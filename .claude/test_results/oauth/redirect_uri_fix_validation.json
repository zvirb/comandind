{
  "test_results": [
    {
      "scenario": "Production with Caddy proxy headers",
      "expected_base": "https://aiwfe.com",
      "actual_base": "https://aiwfe.com",
      "redirect_uri": "https://aiwfe.com/api/v1/oauth/google/callback",
      "correct": true,
      "uses_public_https": true,
      "uses_container_url": false
    },
    {
      "scenario": "Production without proxy headers (broken)",
      "expected_base": "http://api:8000",
      "actual_base": "http://api:8000",
      "redirect_uri": "http://api:8000/api/v1/oauth/google/callback",
      "correct": true,
      "uses_public_https": false,
      "uses_container_url": true
    },
    {
      "scenario": "Local development",
      "expected_base": "http://localhost:8000",
      "actual_base": "http://localhost:8000",
      "redirect_uri": "http://localhost:8000/api/v1/oauth/google/callback",
      "correct": true,
      "uses_public_https": false,
      "uses_container_url": false
    },
    {
      "scenario": "Production with partial headers (host only)",
      "expected_base": "http://api:8000",
      "actual_base": "http://api:8000",
      "redirect_uri": "http://api:8000/api/v1/oauth/google/callback",
      "correct": true,
      "uses_public_https": false,
      "uses_container_url": true
    },
    {
      "scenario": "Production with partial headers (proto only)",
      "expected_base": "http://api:8000",
      "actual_base": "http://api:8000",
      "redirect_uri": "http://api:8000/api/v1/oauth/google/callback",
      "correct": true,
      "uses_public_https": false,
      "uses_container_url": true
    }
  ],
  "production_analysis": {
    "redirect_uri_fix_working": true,
    "uses_public_https_url": true,
    "avoids_container_urls": true,
    "production_redirect_uri": "https://aiwfe.com/api/v1/oauth/google/callback",
    "google_oauth_compatibility": true,
    "status": "SUCCESS",
    "message": "OAuth redirect URI fix is working correctly in production"
  },
  "timestamp": "2025-08-08T21:35:00Z"
}