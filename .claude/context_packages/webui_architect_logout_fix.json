{
  "context": {
    "crisis_summary": "Documents and Calendar routes cause unexpected logouts due to race condition in PrivateRoute.jsx",
    "root_cause": "criticalRoutes array at line 23 includes /documents and /calendar, triggering checkServiceHealth() without timeout and complex async operations",
    "immediate_fix": {
      "file": "/home/marku/ai_workflow_engine/app/webui-next/src/components/PrivateRoute.jsx",
      "line": 23,
      "current_code": "const criticalRoutes = ['/documents', '/calendar', '/chat'];",
      "fixed_code": "const criticalRoutes = ['/chat'];",
      "explanation": "Remove /documents and /calendar from critical routes to prevent unnecessary async operations"
    },
    "secondary_fix": {
      "description": "Add timeout to checkServiceHealth to prevent hanging",
      "implementation": "Wrap checkServiceHealth() call in Promise.race with 3-second timeout",
      "location": "Lines 27-29 in PrivateRoute.jsx"
    },
    "testing_requirements": [
      "Navigate to /documents and verify no logout occurs",
      "Navigate to /calendar and verify session persists",
      "Ensure /chat still functions as critical route",
      "Test rapid navigation between routes"
    ],
    "rollback_procedure": "git checkout -- app/webui-next/src/components/PrivateRoute.jsx",
    "success_metrics": {
      "no_logouts": "0 logout events when navigating to Documents/Calendar",
      "navigation_speed": "< 500ms route transition time",
      "session_persistence": "Auth token remains valid across navigation"
    }
  }
}