{
  "package_id": "frontend_technical_package",
  "package_type": "migrated-context",
  "content": "{\n  \"package_type\": \"frontend_technical\",\n  \"max_tokens\": 3000,\n  \"timestamp\": \"2025-08-15T21:15:00Z\",\n  \"priority\": \"CRITICAL\",\n  \n  \"authentication_ui_issues\": {\n    \"token_handling\": {\n      \"storage_inconsistency\": \"localStorage vs sessionStorage mixed usage\",\n      \"token_refresh\": \"No automatic refresh before expiry\",\n      \"logout_failures\": \"Token not properly cleared from all stores\",\n      \"header_format\": \"Bearer token not consistently added\"\n    },\n    \n    \"auth_guards\": {\n      \"missing_protection\": [\"admin routes\", \"settings pages\", \"data exports\"],\n      \"inconsistent_redirects\": \"Login redirect varies by component\",\n      \"session_timeout\": \"No UI indication of session expiry\"\n    },\n    \n    \"websocket_auth\": {\n      \"current\": \"Cookie-based only\",\n      \"required\": \"Header-based support for JWT tokens\",\n      \"reconnection\": \"No auth refresh on reconnect\"\n    }\n  },\n  \n  \"implementation_requirements\": {\n    \"auth_service\": {\n      \"location\": \"app/webui/services/auth.service.ts\",\n      \"methods\": [\"login\", \"logout\", \"refresh\", \"isAuthenticated\", \"getToken\"],\n      \"storage\": \"Centralized token management with auto-refresh\"\n    },\n    \n    \"auth_interceptor\": {\n      \"location\": \"app/webui/interceptors/auth.interceptor.ts\",\n      \"requirements\": \"Add Bearer token to all API requests\",\n      \"error_handling\": \"401 triggers token refresh, 403 triggers logout\"\n    },\n    \n    \"auth_guard\": {\n      \"location\": \"app/webui/guards/auth.guard.ts\",\n      \"protected_routes\": [\"/*admin*\", \"/*settings*\", \"/*profile*\"],\n      \"redirect\": \"Consistent /login redirect with return URL\"\n    },\n    \n    \"logout_component\": {\n      \"location\": \"app/webui/components/logout.component.ts\",\n      \"actions\": [\n        \"Call logout API endpoint\",\n        \"Clear all token storage\",\n        \"Reset WebSocket connections\",\n        \"Redirect to login page\"\n      ]\n    }\n  },\n  \n  \"ui_components\": {\n    \"session_indicator\": {\n      \"type\": \"countdown timer\",\n      \"warning\": \"5 minutes before expiry\",\n      \"action\": \"Prompt for refresh or logout\"\n    },\n    \n    \"error_messages\": {\n      \"token_expired\": \"Your session has expired. Please log in again.\",\n      \"unauthorized\": \"You don't have permission to access this resource.\",\n      \"network_error\": \"Connection error. Please check your network.\"\n    }\n  },\n  \n  \"testing_requirements\": {\n    \"unit_tests\": [\"auth service\", \"interceptor\", \"guard\"],\n    \"integration_tests\": [\"login flow\", \"logout flow\", \"token refresh\"],\n    \"e2e_tests\": [\"complete auth cycle\", \"session timeout\", \"protected routes\"]\n  },\n  \n  \"success_metrics\": {\n    \"functionality\": [\n      \"Seamless token refresh without user interaction\",\n      \"Consistent logout across all sessions\",\n      \"Protected routes properly secured\",\n      \"WebSocket authentication functional\"\n    ],\n    \"user_experience\": [\n      \"Clear session status indication\",\n      \"Smooth redirect flows\",\n      \"Helpful error messages\",\n      \"No unexpected logouts\"\n    ]\n  }\n}",
  "tokens": 356,
  "created_at": "2025-08-18T15:14:25.698654",
  "last_accessed": "2025-08-18T15:14:25.698665",
  "priority": "medium",
  "context_tags": [
    "migrated",
    "context-package"
  ]
}