{
  "package_type": "session_management",
  "priority": "CRITICAL",
  "target_agent": "frictionless-ux-architect",
  "token_count": 3100,
  "created": "2025-08-16T10:15:00Z",
  "iteration": 7,
  "issue": {
    "description": "Users logged out on navigation between pages",
    "root_cause": "Client-side validation without server verification",
    "impact": "Complete loss of authentication on page changes"
  },
  "fixes": {
    "server_validation": {
      "file": "app/main.py",
      "endpoint": "/api/auth/validate",
      "purpose": "Server-side session validation endpoint"
    },
    "client_integration": {
      "file": "webui-next/utils/auth.js",
      "change": "Replace client-only validation with server API call"
    },
    "session_config": {
      "file": "app/middleware/auth.py",
      "settings": {
        "max_age": 86400,
        "same_site": "lax",
        "https_only": true,
        "httponly": true
      }
    }
  },
  "testing": {
    "persistence_test": "Login → Navigate → Verify still authenticated",
    "validation_test": "curl https://aiwfe.com/api/auth/validate -H 'Cookie: session=token'",
    "logout_test": "Explicit logout → Session cleared"
  },
  "success_criteria": [
    "Users stay logged in during navigation",
    "Page refresh maintains session",
    "Server validates all token checks",
    "No false invalid token errors",
    "Consistent auth state across app"
  ],
  "coordination": {
    "dependencies": [],
    "parallel_work": true,
    "required_by": ["websocket_auth"],
    "validation_by": "user-experience-auditor"
  }
}