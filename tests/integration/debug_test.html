<!DOCTYPE html>
<html>
<head>
    <title>PIXI.js Debug Test</title>
    <style>
        body { margin: 0; background: #000; color: #0f0; font-family: monospace; }
        #info { position: absolute; top: 10px; left: 10px; z-index: 1000; }
        #container { width: 100vw; height: 100vh; }
    </style>
</head>
<body>
    <div id="info">
        <div id="status">Loading...</div>
        <div id="pixi-info"></div>
        <div id="canvas-info"></div>
    </div>
    <div id="container"></div>

    <script type="module">
        import * as PIXI from '/node_modules/pixi.js/dist/pixi.mjs';
        
        const statusEl = document.getElementById('status');
        const pixiInfoEl = document.getElementById('pixi-info');
        const canvasInfoEl = document.getElementById('canvas-info');
        
        try {
            statusEl.textContent = 'Creating PIXI application...';
            
            // Log PIXI version
            pixiInfoEl.innerHTML = `PIXI version: ${PIXI.VERSION}`;
            
            // Create PIXI app with v7 syntax
            const app = new PIXI.Application({
                width: 800,
                height: 600,
                backgroundColor: 0x1a1a1a,
                antialias: true
            });
            
            statusEl.textContent = 'PIXI app created successfully';
            
            // Check what view/canvas property exists
            const viewType = app.view ? 'view' : (app.canvas ? 'canvas' : 'unknown');
            const canvasElement = app.view || app.canvas;
            
            canvasInfoEl.innerHTML = `Canvas type: ${viewType}<br>Canvas exists: ${!!canvasElement}`;
            
            if (canvasElement) {
                // Add to DOM
                document.getElementById('container').appendChild(canvasElement);
                
                // Create a simple test sprite
                const graphics = new PIXI.Graphics();
                graphics.beginFill(0x00FF00);
                graphics.drawRect(0, 0, 100, 100);
                graphics.endFill();
                graphics.x = 100;
                graphics.y = 100;
                
                app.stage.addChild(graphics);
                
                statusEl.textContent = 'SUCCESS: Game canvas visible with green square!';
            } else {
                statusEl.textContent = 'ERROR: No canvas element found!';
                statusEl.style.color = '#f00';
            }
            
        } catch (error) {
            statusEl.textContent = `ERROR: ${error.message}`;
            statusEl.style.color = '#f00';
            console.error('PIXI test error:', error);
        }
    </script>
</body>
</html>