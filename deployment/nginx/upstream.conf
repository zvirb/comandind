# Dynamic Upstream Configuration for Blue-Green Deployment
# This file is automatically updated by the deployment script

# Primary active upstream - routes to current production
upstream game-active {
    server game-blue:8080 max_fails=3 fail_timeout=30s;
    keepalive 32;
}

# Standby upstream - routes to new version for testing
upstream game-standby {
    server game-green:8080 max_fails=3 fail_timeout=30s;
    keepalive 32;
}

# Backup upstream for emergency fallback
upstream game-backup {
    server game-blue:8080 backup max_fails=3 fail_timeout=30s;
    server game-green:8080 backup max_fails=3 fail_timeout=30s;
    keepalive 16;
}