{
  "package_id": "infrastructure_preservation_package",
  "package_type": "migrated-context",
  "content": "{\n  \"package_type\": \"infrastructure_preservation\",\n  \"priority\": \"CRITICAL\",\n  \"target_agents\": [\"monitoring-analyst\", \"deployment-orchestrator\"],\n  \"token_count\": 3700,\n  \"created\": \"2025-08-16T10:15:00Z\",\n  \"iteration\": 7,\n  \"mission\": \"Maintain 100% system health during UX restoration\",\n  \"current_status\": {\n    \"healthy_components\": [\n      \"Prometheus (metrics)\",\n      \"Grafana (dashboards)\",\n      \"PostgreSQL (database)\",\n      \"Redis (cache)\",\n      \"Qdrant (vectors)\",\n      \"LangGraph (workflows)\",\n      \"Ollama (LLM)\",\n      \"SSL/TLS (certificates)\"\n    ],\n    \"health_score\": \"100%\",\n    \"must_preserve\": true\n  },\n  \"monitoring_requirements\": {\n    \"real_time_checks\": {\n      \"script\": \"monitor_infrastructure.sh\",\n      \"interval\": \"30 seconds\",\n      \"components\": [\n        \"docker-compose ps\",\n        \"curl health endpoints\",\n        \"container status check\"\n      ]\n    },\n    \"rollback_triggers\": [\n      \"Container restart count > 3\",\n      \"Memory usage > 90%\",\n      \"CPU sustained > 80%\",\n      \"Database connections drop\",\n      \"SSL certificate issues\",\n      \"Any service unhealthy\"\n    ],\n    \"safety_protocol\": [\n      \"Create backup snapshot\",\n      \"Test in isolation\",\n      \"Apply with monitoring\",\n      \"Verify no degradation\",\n      \"Document change\"\n    ]\n  },\n  \"preservation_rules\": {\n    \"do_not_modify\": [\n      \"Docker network configurations\",\n      \"Database connection strings\",\n      \"SSL certificate paths\",\n      \"Prometheus scrape configs\",\n      \"Grafana datasources\",\n      \"Volume mount points\"\n    ],\n    \"safe_to_modify\": [\n      \"Application code (with testing)\",\n      \"Nginx routing rules (with backup)\",\n      \"Frontend assets\",\n      \"API endpoints (maintain contracts)\",\n      \"WebSocket handlers\"\n    ]\n  },\n  \"metrics_monitoring\": {\n    \"critical_metrics\": [\n      \"container_health_status == 1\",\n      \"up{job=~\\\".*\\\"} == 1\",\n      \"postgres_connections < 90\",\n      \"redis_clients < 1000\",\n      \"http_errors_rate < 0.01\",\n      \"ssl_cert_expiry > 30\"\n    ],\n    \"alerting\": true,\n    \"dashboards\": [\"system-health\", \"ux-restoration\"]\n  },\n  \"backup_procedures\": {\n    \"before_fixes\": [\n      \"pg_dump database\",\n      \"backup docker-compose.yml\",\n      \"backup nginx configs\"\n    ],\n    \"rollback_commands\": [\n      \"docker-compose -f backup.yml up -d\",\n      \"psql restore from backup\",\n      \"nginx config restore\"\n    ]\n  },\n  \"reporting\": {\n    \"frequency\": \"Every 30 minutes\",\n    \"format\": \"Infrastructure Status Report\",\n    \"includes\": [\n      \"Container health\",\n      \"Resource usage\",\n      \"Changes applied\",\n      \"Issues detected\"\n    ]\n  },\n  \"success_criteria\": [\n    \"All containers remain healthy\",\n    \"No service interruptions\",\n    \"Metrics within normal ranges\",\n    \"No rollbacks triggered\",\n    \"SSL/TLS functional\",\n    \"Database integrity maintained\",\n    \"Zero data loss\"\n  ],\n  \"coordination\": {\n    \"communicate_with\": [\"all_implementation_agents\"],\n    \"alert_on\": \"any_infrastructure_impact\",\n    \"validation\": \"continuous\"\n  }\n}",
  "tokens": 349,
  "created_at": "2025-08-18T15:14:25.504271",
  "last_accessed": "2025-08-18T15:14:25.504278",
  "priority": "medium",
  "context_tags": [
    "migrated",
    "context-package"
  ]
}