{
  "package_id": "webui_architect_logout_fix",
  "package_type": "migrated-context",
  "content": "{\n  \"context\": {\n    \"crisis_summary\": \"Documents and Calendar routes cause unexpected logouts due to race condition in PrivateRoute.jsx\",\n    \"root_cause\": \"criticalRoutes array at line 23 includes /documents and /calendar, triggering checkServiceHealth() without timeout and complex async operations\",\n    \"immediate_fix\": {\n      \"file\": \"/home/marku/ai_workflow_engine/app/webui-next/src/components/PrivateRoute.jsx\",\n      \"line\": 23,\n      \"current_code\": \"const criticalRoutes = ['/documents', '/calendar', '/chat'];\",\n      \"fixed_code\": \"const criticalRoutes = ['/chat'];\",\n      \"explanation\": \"Remove /documents and /calendar from critical routes to prevent unnecessary async operations\"\n    },\n    \"secondary_fix\": {\n      \"description\": \"Add timeout to checkServiceHealth to prevent hanging\",\n      \"implementation\": \"Wrap checkServiceHealth() call in Promise.race with 3-second timeout\",\n      \"location\": \"Lines 27-29 in PrivateRoute.jsx\"\n    },\n    \"testing_requirements\": [\n      \"Navigate to /documents and verify no logout occurs\",\n      \"Navigate to /calendar and verify session persists\",\n      \"Ensure /chat still functions as critical route\",\n      \"Test rapid navigation between routes\"\n    ],\n    \"rollback_procedure\": \"git checkout -- app/webui-next/src/components/PrivateRoute.jsx\",\n    \"success_metrics\": {\n      \"no_logouts\": \"0 logout events when navigating to Documents/Calendar\",\n      \"navigation_speed\": \"< 500ms route transition time\",\n      \"session_persistence\": \"Auth token remains valid across navigation\"\n    }\n  }\n}",
  "tokens": 198,
  "created_at": "2025-08-18T15:14:25.951748",
  "last_accessed": "2025-08-18T15:14:25.951759",
  "priority": "medium",
  "context_tags": [
    "migrated",
    "context-package"
  ]
}