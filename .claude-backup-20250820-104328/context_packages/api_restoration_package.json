{
  "package_type": "api_restoration",
  "priority": "HIGH",
  "target_agents": ["backend-gateway-expert", "python-refactoring-architect"],
  "token_count": 3300,
  "created": "2025-08-16T10:15:00Z",
  "iteration": 7,
  "endpoints": {
    "critical": [
      "/api/chat/",
      "/api/documents/",
      "/api/calendar/",
      "/api/workflows/"
    ],
    "status": "All returning 404 errors"
  },
  "root_cause": {
    "backend": "Double mounting and incorrect route registration",
    "nginx": "Proxy configuration adding duplicate prefixes",
    "frontend": "API client using wrong base paths"
  },
  "fixes": {
    "route_registration": {
      "file": "app/main.py",
      "pattern": "Direct registration with /api prefix, no double mounting"
    },
    "router_creation": {
      "files": ["app/routers/chat.py", "app/routers/documents.py"],
      "pattern": "FastAPI routers with proper authentication"
    },
    "frontend_client": {
      "file": "webui-next/api/client.js",
      "pattern": "Consistent /api base path for all endpoints"
    }
  },
  "testing": {
    "health_check": "curl https://aiwfe.com/api/health",
    "authenticated_test": "curl https://aiwfe.com/api/chat/conversations -H 'Cookie: session=token'",
    "all_endpoints": ["chat", "documents", "calendar", "workflows"]
  },
  "success_criteria": [
    "All 4 priority endpoints return data",
    "Authentication required and validated",
    "Frontend can access all APIs",
    "No routing conflicts",
    "API docs at /docs"
  ],
  "coordination": {
    "dependencies": ["session_management"],
    "parallel_work": true,
    "validation_by": "fullstack-communication-auditor"
  }
}